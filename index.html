<script>
    const countries = [
        { name: "Ğ£Ğ³Ğ°Ğ½Ğ´Ğ° ğŸ‡ºğŸ‡¬", capital: "ĞšĞ°Ğ¼Ğ¿Ğ°Ğ»Ğ°", population: "47 Ğ¼Ğ»Ğ½" },
        { name: "ĞšĞ°Ğ·Ğ°Ñ…ÑÑ‚Ğ°Ğ½ ğŸ‡°ğŸ‡¿", capital: "ĞÑÑ‚Ğ°Ğ½Ğ°", population: "19 Ğ¼Ğ»Ğ½" },
        { name: "Ğ¡Ğ¨Ğ ğŸ‡ºğŸ‡¸", capital: "Ğ’Ğ°ÑˆĞ¸Ğ½Ğ³Ñ‚Ğ¾Ğ½", population: "333 Ğ¼Ğ»Ğ½" },
        { name: "Ğ¤Ñ€Ğ°Ğ½Ñ†Ğ¸Ñ ğŸ‡«ğŸ‡·", capital: "ĞŸĞ°Ñ€Ğ¸Ğ¶", population: "68 Ğ¼Ğ»Ğ½" },
        { name: "Ğ¨Ğ²ĞµĞ¹Ñ†Ğ°Ñ€Ğ¸Ñ ğŸ‡¨ğŸ‡­", capital: "Ğ‘ĞµÑ€Ğ½", population: "8.7 Ğ¼Ğ»Ğ½" },
        { name: "Ğ¯Ğ¿Ğ¾Ğ½Ğ¸Ñ ğŸ‡¯ğŸ‡µ", capital: "Ğ¢Ğ¾ĞºĞ¸Ğ¾", population: "125 Ğ¼Ğ»Ğ½" },
        { name: "Ğ“ĞµÑ€Ğ¼Ğ°Ğ½Ğ¸Ñ ğŸ‡©ğŸ‡ª", capital: "Ğ‘ĞµÑ€Ğ»Ğ¸Ğ½", population: "83 Ğ¼Ğ»Ğ½" },
        { name: "Ğ’ĞµĞ»Ğ¸ĞºĞ¾Ğ±Ñ€Ğ¸Ñ‚Ğ°Ğ½Ğ¸Ñ ğŸ‡¬ğŸ‡§", capital: "Ğ›Ğ¾Ğ½Ğ´Ğ¾Ğ½", population: "67 Ğ¼Ğ»Ğ½" },
        { name: "Ğ¨Ğ²ĞµÑ†Ğ¸Ñ ğŸ‡¸ğŸ‡ª", capital: "Ğ¡Ñ‚Ğ¾ĞºĞ³Ğ¾Ğ»ÑŒĞ¼", population: "10.5 Ğ¼Ğ»Ğ½" },
        { name: "ĞšĞ¸Ñ‚Ğ°Ğ¹ ğŸ‡¨ğŸ‡³", capital: "ĞŸĞµĞºĞ¸Ğ½", population: "1.41 Ğ¼Ğ»Ñ€Ğ´" },
        { name: "Ğ Ğ¾ÑÑĞ¸Ñ ğŸ‡·ğŸ‡º", capital: "ĞœĞ¾ÑĞºĞ²Ğ°", population: "146 Ğ¼Ğ»Ğ½" },
        { name: "ĞĞ¸Ğ³ĞµÑ€ ğŸ‡³ğŸ‡ª", capital: "ĞĞ¸Ğ°Ğ¼ĞµĞ¹", population: "27 Ğ¼Ğ»Ğ½" },
        { name: "Ğ‘ĞµĞ»Ğ°Ñ€ÑƒÑÑŒ ğŸ‡§ğŸ‡¾", capital: "ĞœĞ¸Ğ½ÑĞº", population: "9.3 Ğ¼Ğ»Ğ½" },
        { name: "Ğ‘Ñ€Ğ°Ğ·Ğ¸Ğ»Ğ¸Ñ ğŸ‡§ğŸ‡·", capital: "Ğ‘Ñ€Ğ°Ğ·Ğ¸Ğ»Ğ¸Ğ°", population: "215 Ğ¼Ğ»Ğ½" },
        { name: "Ğ˜Ğ½Ğ´Ğ¸Ñ ğŸ‡®ğŸ‡³", capital: "ĞÑŒÑ-Ğ”ĞµĞ»Ğ¸", population: "1.42 Ğ¼Ğ»Ñ€Ğ´" },
        { name: "ĞšĞ¾Ğ½Ğ³Ğ¾ ğŸ‡¨ğŸ‡¬", capital: "Ğ‘Ñ€Ğ°Ğ·Ğ·Ğ°Ğ²Ğ¸Ğ»ÑŒ", population: "6 Ğ¼Ğ»Ğ½" }
    ];

    const usedCountries = JSON.parse(localStorage.getItem("usedCountries") || "[]");
    const usedNumbers = JSON.parse(localStorage.getItem("usedNumbers") || "[]");

    let playerNumber = JSON.parse(localStorage.getItem("playerNumber"));
    let playerCountry = JSON.parse(localStorage.getItem("playerCountry"));

    function showPlayerInfo() {
        if (playerNumber && playerCountry) {
            document.getElementById("playerInfo").innerText =
                `ğŸ“¦ ĞĞ¾Ğ¼ĞµÑ€: ${playerNumber}\n` +
                `ğŸŒ Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ°: ${playerCountry.name}\n` +
                `ğŸ™ï¸ Ğ¡Ñ‚Ğ¾Ğ»Ğ¸Ñ†Ğ°: ${playerCountry.capital}\n` +
                `ğŸ‘¥ ĞĞ°ÑĞµĞ»ĞµĞ½Ğ¸Ğµ: ${playerCountry.population}`;
            document.getElementById("deleteBtn").disabled = false;
        }
    }

    function getRandomNumber() {
        const availableNumbers = [];
        for (let i = 1; i <= 1000; i++) {
            if (!usedNumbers.includes(i)) availableNumbers.push(i);
        }
        if (availableNumbers.length === 0) return null;
        return availableNumbers[Math.floor(Math.random() * availableNumbers.length)];
    }

    function getRandomCountry() {
        const available = countries.filter(c => !usedCountries.includes(c.name));
        if (available.length === 0) return null;
        return available[Math.floor(Math.random() * available.length)];
    }

    document.getElementById("getNumberBtn").onclick = () => {
        if (playerNumber && playerCountry) {
            document.getElementById("message").innerText = "ğŸ‰ Ğ£ Ğ²Ğ°Ñ ÑƒĞ¶Ğµ ĞµÑÑ‚ÑŒ Ñ€Ğ¾Ğ»ÑŒ!";
            return;
        }

        const number = getRandomNumber();
        const country = getRandomCountry();

        if (!number || !country) {
            document.getElementById("message").innerText = "ğŸ˜¢ Ğ’ÑĞµ ÑÑ‚Ñ€Ğ°Ğ½Ñ‹ Ğ¸ Ğ½Ğ¾Ğ¼ĞµÑ€Ğ° ÑƒĞ¶Ğµ Ğ·Ğ°Ğ½ÑÑ‚Ñ‹!";
            return;
        }

        playerNumber = number;
        playerCountry = country;

        usedNumbers.push(number);
        usedCountries.push(country.name);

        // Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ Ğ² localStorage
        localStorage.setItem("playerNumber", JSON.stringify(playerNumber));
        localStorage.setItem("playerCountry", JSON.stringify(playerCountry));
        localStorage.setItem("usedCountries", JSON.stringify(usedCountries));
        localStorage.setItem("usedNumbers", JSON.stringify(usedNumbers));

        showPlayerInfo();
        document.getElementById("message").innerText = "";
    };

    document.getElementById("deleteBtn").onclick = () => {
        if (playerNumber !== null && playerCountry !== null) {
            const indexNum = usedNumbers.indexOf(playerNumber);
            if (indexNum !== -1) usedNumbers.splice(indexNum, 1);

            const indexCountry = usedCountries.indexOf(playerCountry.name);
            if (indexCountry !== -1) usedCountries.splice(indexCountry, 1);

            // Ğ£Ğ´Ğ°Ğ»ÑĞµĞ¼ Ğ¸Ğ· localStorage
            playerNumber = null;
            playerCountry = null;
            localStorage.removeItem("playerNumber");
            localStorage.removeItem("playerCountry");
            localStorage.setItem("usedCountries", JSON.stringify(usedCountries));
            localStorage.setItem("usedNumbers", JSON.stringify(usedNumbers));

            document.getElementById("playerInfo").innerText = "";
            document.getElementById("deleteBtn").disabled = true;
            document.getElementById("message").innerText = "âœ… Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¾. ĞœĞ¾Ğ¶ĞµÑ‚Ğµ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ½Ğ¾Ğ²Ğ¾.";
        }
    };

    // ĞŸÑ€Ğ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹
    showPlayerInfo();
</script>

